{% extends "admin/change_form.html" %}
{% block admin_change_form_document_ready %}
{{ block.super }}
<script>
Array.from(document.querySelectorAll('div.readonly')).forEach(div => {
    let data;
    try {
        data = JSON.parse(div.innerText);
    } catch {
        // Not valid JSON
        return;
    }
    div.style.whiteSpace = 'pre-wrap';
    div.style.fontFamily = 'courier';
    div.style.fontSize = '0.9em';
    div.innerText = JSON.stringify(data, null, 2);
});

function onClickSaveOpenScooby(element, locationId) {
    window.open('https://help.vaccinateca.com/call/?location_id=' + locationId, '_blank');
}

</script>

{% endblock %}

{% block submit_buttons_bottom %}
{% load admin_modify %}
    <input 
        onclick="onClickSaveOpenScooby(this, ({{ location_id }}))"
        type="submit"
        value="Save and open Scooby"
        style="margin-bottom: 15px;"
    >
    
{% submit_row %}
{% endblock %}
